(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[861],{9296:function(n,e,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/users/login",function(){return t(8035)}])},8035:function(n,e,t){"use strict";t.r(e),t.d(e,{default:function(){return _}});var r=t(5893),i=t(7294);function o(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function a(n){var e=function(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})))),r.forEach((function(e){o(n,e,t[e])}))}return n}({display:"flex",justifyContent:"center",alignItems:"center"},n.style);return(0,r.jsx)("div",{style:e,children:n.children})}function s(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function c(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})))),r.forEach((function(e){s(n,e,t[e])}))}return n}function l(n){var e={backgroundColor:"white",width:"100%",padding:"30px",borderRadius:"18px",boxShadow:"0 0 5px rgba(0,0,0,0.3)"};switch(n.variant){case"main":e=c({},e,{width:"400px",maxWidth:"70vw",marginTop:"20px"})}return e=c({},e,n.style),(0,r.jsx)("div",{style:e,children:n.children})}var u=t(8862),d=t(3741),f=t(5398),p=t(9469),h=t(2961),x=t(2450),y=t(3946),m=t(7109),j=t(3321),v=t(8456),b=t(8262);function g(n){return(0,r.jsx)(b.Z,{open:n.isloading,children:(0,r.jsx)(a,{style:{padding:"30px",paddingTop:"20px",minWidth:"200px",maxWidth:"60vw"},children:(0,r.jsxs)("div",{children:[n.title?(0,r.jsx)(a,{style:{marginBottom:"10px",fontSize:"15px",fontWeight:600},children:n.title}):"",(0,r.jsx)(a,{style:{padding:"10px"},children:(0,r.jsx)(v.Z,{})})]})})})}var w=t(6798),O=t(1737),S=t(9669),P=t.n(S);function Z(n,e){return function(n){if(Array.isArray(n))return n}(n)||function(n,e){var t=[],r=!0,i=!1,o=void 0;try{for(var a,s=n[Symbol.iterator]();!(r=(a=s.next()).done)&&(t.push(a.value),!e||t.length!==e);r=!0);}catch(c){i=!0,o=c}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return t}(n,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function k(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var E=i.forwardRef((function(n,e){return(0,r.jsx)(O.Z,function(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})))),r.forEach((function(e){k(n,e,t[e])}))}return n}({elevation:6,ref:e,variant:"filled"},n))})),_=function(){var n=(0,i.useState)(!1),e=n[0],t=n[1],o=(0,i.useState)(!1),s=o[0],c=(o[1],(0,i.useState)("")),v=c[0],b=(c[1],(0,i.useState)(!1)),O=b[0],S=b[1],k=(0,i.useState)((0,r.jsx)("div",{})),_=k[0],T=k[1],C=(0,i.useState)("success"),W=C[0],A=C[1],D=(0,i.useState)(!1),I=D[0],N=D[1],U=function(n){N(!0);var e=new FormData(document.getElementById("login-form"));(function(n,e){var t=void 0===e?{}:e,r=new FormData,i=!0,o=!1,a=void 0;try{for(var s,c=Object.entries(t)[Symbol.iterator]();!(i=(s=c.next()).done);i=!0){var l=Z(s.value,2),u=l[0],d=l[1];r.append(u,d)}}catch(f){o=!0,a=f}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return P()({method:"POST",url:n,headers:{"content-Type":"multipart/form-data"},data:r})})("".concat(portalUrl,"/api/login"),{username:e.get("username"),password:e.get("password")}).then((function(n){var e=n.data;S(!0),e.success?(A("success"),T((0,r.jsx)("div",{children:"Login successful"})),window.location.href=portalUrl):(A("error"),T((0,r.jsx)("div",{children:e.message})),N(!1))}))};return(0,i.useEffect)((function(){document.onkeydown=function(n){"Enter"==n.key&&U()}}),[]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a,{style:{minHeight:"90vh"},children:(0,r.jsxs)(l,{style:{width:"250px",maxWidth:"80vw"},children:[(0,r.jsx)(a,{children:(0,r.jsx)(u.Z,{variant:"h6",textAlign:"center",style:{marginBottom:"5px",maxWidth:"250px"},children:"Human Resources Management System"})}),(0,r.jsx)(a,{children:(0,r.jsx)(u.Z,{variant:"body1",sx:{fontWeight:500},children:"University of Ibadan"})}),(0,r.jsxs)("form",{style:{width:"100%"},id:"login-form",children:[(0,r.jsx)(d.Z,{variant:"standard",label:"Username",name:"username",InputProps:{startAdornment:(0,r.jsx)(m.Z,{position:"start",children:(0,r.jsx)(f.Z,{color:"action"})})},sx:{width:"100%",marginTop:"30px"}}),(0,r.jsx)(d.Z,{variant:"standard",label:"Password",type:e?"text":"password",name:"password",InputProps:{startAdornment:(0,r.jsx)(m.Z,{position:"start",children:(0,r.jsx)(p.Z,{color:"action"})}),endAdornment:(0,r.jsx)(m.Z,{position:"end",children:(0,r.jsx)(y.Z,{onClick:function(n){t(!e)},children:e?(0,r.jsx)(x.Z,{color:"action"}):(0,r.jsx)(h.Z,{color:"action"})})})},sx:{width:"100%",marginTop:"30px"}}),(0,r.jsx)(a,{style:{marginTop:"30px"},children:(0,r.jsx)(j.Z,{variant:"contained",onClick:U,disabled:I,children:"Login"})})]})]})}),(0,r.jsx)(g,{isloading:s,title:v}),(0,r.jsx)(w.Z,{open:O,autoHideDuration:6e3,onClose:function(n){S(!1)},anchorOrigin:{vertical:"bottom",horizontal:"center"},children:(0,r.jsx)(E,{onClose:function(n){S(!1)},severity:W,sx:{width:"100%"},children:_})})]})}}},function(n){n.O(0,[788,774,888,179],(function(){return e=9296,n(n.s=e);var e}));var e=n.O();_N_E=e}]);